-- simple creation etc - value rendered is passed back as it came in
select '100 eur'::currency as "100 eur";
 100 eur 
---------
 100 EUR
(1 row)

select '-100 eur'::currency as "-100 eur";
 -100 eur 
----------
 -100 EUR
(1 row)

select '100.00 eur'::currency as "100.00 eur";
 100.00 eur 
------------
 100.00 EUR
(1 row)

select '-100.00 eur'::currency as "-100.00 eur";
 -100.00 eur 
-------------
 -100.00 EUR
(1 row)

-- these values make no sense, but who cares :)
select '-100.005 eur'::currency as "-100.005 eur";
 -100.005 eur 
--------------
 -100.005 EUR
(1 row)

select '-100.006 eur'::currency as "-100.006 eur";
 -100.006 eur 
--------------
 -100.006 EUR
(1 row)

-- formatting for display requires the currency_rates table
select format('100 nzd'::currency) as "NZD 100.00";
 NZD 100.00 
------------
 NZD 100.00
(1 row)

select format('-100.006 eur'::currency) as "€ -100.01";
 € -100.01 
-----------
 € -100.01
(1 row)

-- test conversion
select change('100 nzd'::currency, 'btc') as "300.00 BTC";
 300.00 BTC 
------------
 300 BTC
(1 row)

select format(change('100 nzd'::currency, 'gbp')) as "£ 42.86";
 £ 42.86 
---------
 £ 42.86
(1 row)

